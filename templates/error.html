<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>错误 - Copernicus Data Download</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(180deg, #f7f9fc 0%, #ffffff 100%); }
        .error-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .error-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
        }
        .error-icon {
            font-size: 4rem;
            color: #dc3545;
            margin-bottom: 20px;
        }
        .back-button {
            margin-top: 20px;
        }
        footer { border-top: 1px solid #e9ecef; }
        footer a { text-decoration: none; }
        footer a:hover { text-decoration: underline; }

        @media (prefers-color-scheme: dark) {
            body { background: linear-gradient(180deg, #0b0e13 0%, #12161d 100%); color: #e2e6ea; }
            .error-card { background: #1c2128; color: #e2e6ea; }
            footer { border-top-color: #2b3138; }
        }
        /* 手动主题覆盖 */
        body[data-theme='dark'] { background: linear-gradient(180deg, #0b0e13 0%, #12161d 100%) !important; color: #e2e6ea !important; }
        body[data-theme='dark'] .error-card { background: #1c2128 !important; color: #e2e6ea !important; }
        body[data-theme='dark'] footer { border-top-color: #2b3138 !important; }

        body[data-theme='light'] { background: linear-gradient(180deg, #f7f9fc 0%, #ffffff 100%) !important; color: #212529 !important; }
        body[data-theme='light'] .error-card { background: #fff !important; color: #212529 !important; }
        body[data-theme='light'] footer { border-top-color: #e9ecef !important; }
    </style>
</head>
<body>
	<div class="container mt-3 d-flex justify-content-end">
		<div class="btn-group btn-group-sm" role="group" aria-label="主题">
			<button type="button" class="btn btn-outline-secondary" id="btnThemeAuto">跟随系统</button>
			<button type="button" class="btn btn-outline-secondary" id="btnThemeLight">浅色</button>
			<button type="button" class="btn btn-outline-secondary" id="btnThemeDark">深色</button>
		</div>
	</div>
	<div class="error-container">
		<div class="error-card">
			<div class="error-icon">⚠️</div>
			<h2 class="text-danger mb-3">{{ message or '发生错误' }}</h2>
			<p class="text-muted mb-4">{{ details or '请检查您的请求或稍后重试' }}</p>
			<a href="/" class="btn btn-primary back-button">返回首页</a>
		</div>
	</div>

	<footer class="py-4 mt-5">
		<div class="container text-center small text-muted">
			<div>
				相关链接：
				<a href="https://www.ecmwf.int/" target="_blank" rel="noopener noreferrer">ECMWF</a>
				·
				<a href="https://cds.climate.copernicus.eu/api-how-to" target="_blank" rel="noopener noreferrer">CDS API</a>
			</div>
			<div class="mt-1">
				© <span id="copyrightYear"></span> Copernicus Data Download UI. 本页面仅为学习与研究用途。
			</div>
		</div>
	</footer>
	<script>
		(function(){
			var y = new Date().getFullYear();
			var el = document.getElementById('copyrightYear');
			if (el) el.textContent = y;
			applySavedTheme();
			document.getElementById('btnThemeAuto').onclick = function(){ setTheme('auto'); };
			document.getElementById('btnThemeLight').onclick = function(){ setTheme('light'); };
			document.getElementById('btnThemeDark').onclick = function(){ setTheme('dark'); };
		})();
		function setTheme(mode){ localStorage.setItem('cds_theme', mode); applySavedTheme(); }
		function applySavedTheme(){
			var mode = localStorage.getItem('cds_theme') || 'auto';
			var b = document.body; b.removeAttribute('data-theme');
			if (mode === 'dark') b.setAttribute('data-theme','dark');
			else if (mode === 'light') b.setAttribute('data-theme','light');
		}
	</script>
</body>
</html>
